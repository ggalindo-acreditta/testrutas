{"version":3,"sources":["./src/app/main/connect-organization/connect-organization.component.html","./src/app/main/connect-organization/connect-organization.component.scss","./src/app/main/connect-organization/connect-organization.component.ts","./src/app/main/connect-organization/connect-organization.module.ts","./src/app/main/connect-organization/connect-organization.service.ts","./src/app/main/connect-organization/i18n/es.ts"],"names":[],"mappings":"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","file":"main-connect-organization-connect-organization-module.js","sourcesContent":["export default \"<div fxLayout=\\\"row\\\" fxLayoutAlign=\\\"start\\\" class=\\\"page-layout carded\\\">\\r\\n    \\r\\n    <form fxLayout=\\\"column\\\" [formGroup]=\\\"form\\\" fxFlex=\\\"100\\\" fxLayoutAlign=\\\"center center\\\">\\r\\n        <span style=\\\"font-size: 1.8em;\\\" class=\\\"pb-20\\\"><b>{{\\\"CONFIRMATION.CONNECT\\\" | translate}}</b></span>\\r\\n        <div fxLayout=\\\"column\\\" fxLayoutAlign=\\\"start center\\\" class=\\\"p-20 mb-80 mat-card\\\" style=\\\"border-radius: 8px; width: 38%; min-width: 575px;\\\">\\r\\n            <div class=\\\"mb-20 mt-12 px-28\\\">\\r\\n                <span style=\\\"text-align: center; font-size: 1.25em;\\\">\\r\\n                    {{\\\"CONFIRMATION.INFO\\\" | translate}}\\r\\n                </span>\\r\\n            </div>\\r\\n            <mat-form-field style=\\\"width: 70%\\\">\\r\\n                <input\\r\\n                    matInput\\r\\n                    placeholder=\\\"{{'CONFIRMATION.ID' | translate}}\\\"\\r\\n                    autocomplete=\\\"off\\\"\\r\\n                    formControlName=\\\"id\\\"\\r\\n                    required\\r\\n                >\\r\\n                <mat-icon matSuffix class=\\\"secondary-text\\\" style=\\\"cursor: pointer; position: relative; left: 50px; top: 8px; font-size: 1.8em;\\\" (click)=\\\"router.navigate(['help']);\\\">help</mat-icon>\\r\\n            </mat-form-field>\\r\\n\\r\\n            <mat-form-field style=\\\"width: 70%\\\">\\r\\n                <input\\r\\n                    matInput\\r\\n                    placeholder=\\\"{{'CONFIRMATION.TOKEN' | translate}}\\\"\\r\\n                    autocomplete=\\\"off\\\"\\r\\n                    formControlName=\\\"token\\\"\\r\\n                    required\\r\\n                >\\r\\n                <mat-icon matSuffix class=\\\"secondary-text\\\" style=\\\"cursor: pointer; position: relative; left: 50px; top: 8px; font-size: 1.8em;\\\" (click)=\\\"router.navigate(['help']);\\\">help</mat-icon>\\r\\n            </mat-form-field>\\r\\n            <div style=\\\"width: 100%;\\\" fxLayout=\\\"center center\\\" class=\\\"px-20 pt-12\\\">\\r\\n                <button mat-raised-button color=\\\"accent\\\" (click)=\\\"router.navigate(['first_login'])\\\">{{'CONFIRMATION.GO_BACK' | translate}}</button>\\r\\n                <button mat-raised-button color=\\\"accent\\\" style=\\\"margin-left: auto;\\\" [disabled]=\\\"form.invalid\\\" (click)=\\\"doConnect()\\\">{{'CONFIRMATION.DO_CONNECT' | translate}}</button>\\r\\n            </div>\\r\\n        </div>\\r\\n    </form>\\r\\n</div>\"","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21haW4vY29ubmVjdC1vcmdhbml6YXRpb24vY29ubmVjdC1vcmdhbml6YXRpb24uY29tcG9uZW50LnNjc3MifQ== */\"","import { Component, OnInit } from '@angular/core';\r\n\r\nimport { FuseTranslationLoaderService } from '@fuse/services/translation-loader.service';\r\nimport { FuseConfigService } from '@fuse/services/config.service';\r\nimport { FormBuilder, FormGroup, FormControl, Validators, AbstractControl } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\n\r\nimport { locale as spanish } from './i18n/es';\r\nimport { FuseProgressBarService } from '@fuse/components/progress-bar/progress-bar.service';\r\nimport { ConnectOrganizationService } from './connect-organization.service';\r\nimport { MatSnackBar, MatSnackBarHorizontalPosition, MatSnackBarVerticalPosition } from '@angular/material/snack-bar';\r\nimport { BadgesService } from 'app/services/badges.service';\r\nimport { AuthService } from '../auth/auth.service';\r\n\r\n@Component({\r\n    selector   : 'connect-organization',\r\n    templateUrl: './connect-organization.component.html',\r\n    styleUrls  : ['./connect-organization.component.scss']\r\n})\r\n\r\nexport class ConnectOrganizationComponent implements OnInit {\r\n\r\n    form: FormGroup;\r\n    id;\r\n\r\n    horizontalPosition: MatSnackBarHorizontalPosition = 'center';\r\n    verticalPosition: MatSnackBarVerticalPosition = 'top';\r\n\r\n    constructor(\r\n        private router: Router,\r\n        private _fuseTranslationLoaderService: FuseTranslationLoaderService,\r\n        private _fuseConfigService: FuseConfigService,\r\n        private _fuseProgressBarService: FuseProgressBarService,\r\n        private organizationService: ConnectOrganizationService,\r\n        private formBuilder: FormBuilder,\r\n        private snackbar: MatSnackBar,\r\n        private badgesService: BadgesService,\r\n        private authService: AuthService\r\n    ) {\r\n        this._fuseTranslationLoaderService.loadTranslations(spanish);\r\n\r\n        this._fuseConfigService.config = {\r\n            layout: {\r\n                navbar: {\r\n                    hidden: false\r\n                },\r\n                toolbar: {\r\n                    hidden: false\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    ngOnInit() {\r\n        this._fuseConfigService.getConfig().subscribe(val => {\r\n            this.id = val.user.id;\r\n        })\r\n        this.form = this.formBuilder.group({\r\n            id: ['', Validators.required],\r\n            token: ['', Validators.required]\r\n        }, { Validators: null });\r\n    }\r\n\r\n    doConnect() {\r\n        this._fuseProgressBarService.show();\r\n\r\n        const body = {\r\n            id: this.form.get('id').value,\r\n            token: this.form.get('token').value\r\n        }\r\n        \r\n        this.organizationService.authenticateOrganization(body).subscribe((res: any) => {\r\n            sessionStorage.removeItem('badges');\r\n            this.badgesService.fetchBadges().subscribe(data_badges => {\r\n                sessionStorage.setItem('badges', JSON.stringify(data_badges));\r\n                this._fuseConfigService.config = {\r\n                    badges: data_badges,\r\n                    layout: {\r\n                        navbar: {\r\n                            hidden: false\r\n                        }\r\n                    }\r\n                }\r\n                this.authService.getProfile(this.id).subscribe(user => {\r\n                    this._fuseConfigService.config = {\r\n                        user: {\r\n                            id: user.id,\r\n                            firstname: user.firstname,\r\n                            lastname: user.lastname,\r\n                            email: user.email,\r\n                            type: user.type,\r\n                            status: user.status,\r\n                            organization: {\r\n                                id: user.organization_id,\r\n                                name: user.organization_name,\r\n                                description: user.organization_description,\r\n                                domain: user.organization_domain,\r\n                                image_url: user.organization_image_url\r\n                            }\r\n                        }\r\n                    };\r\n                    this._fuseProgressBarService.hide();\r\n\r\n                    this.snackbar.open(res.message, 'INFO', {\r\n                        horizontalPosition: this.horizontalPosition,\r\n                        verticalPosition: this.verticalPosition,\r\n                        duration: 5000,\r\n                        panelClass: 'green',\r\n                    });\r\n\r\n                    this.router.navigate(['home']);\r\n                }, err => {\r\n                    this.snackbar.open(err.error.message, 'ERROR', {\r\n                        horizontalPosition: this.horizontalPosition,\r\n                        verticalPosition: this.verticalPosition,\r\n                        duration: 5000,\r\n                        panelClass: 'red',\r\n                    });\r\n                    this._fuseProgressBarService.hide();\r\n                });\r\n            }, err => {\r\n                this.snackbar.open(err.error.message, 'ERROR', {\r\n                    horizontalPosition: this.horizontalPosition,\r\n                    verticalPosition: this.verticalPosition,\r\n                    duration: 5000,\r\n                    panelClass: 'red',\r\n                });\r\n                this._fuseProgressBarService.hide();\r\n            });\r\n\r\n        }, err => {\r\n            this.snackbar.open(err.error.message, 'ERROR', {\r\n                horizontalPosition: this.horizontalPosition,\r\n                verticalPosition: this.verticalPosition,\r\n                duration: 5000,\r\n                panelClass: 'red',\r\n            });\r\n            this._fuseProgressBarService.hide();\r\n        });\r\n    }\r\n\r\n}","import { NgModule } from '@angular/core';\r\nimport { RouterModule } from '@angular/router';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\n\r\nimport { FuseSharedModule } from '@fuse/shared.module';\r\n\r\nimport { ConnectOrganizationComponent } from './connect-organization.component';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\r\n\r\nconst routes = [\r\n    {\r\n        path     : '',\r\n        component: ConnectOrganizationComponent\r\n    }\r\n];\r\n\r\n@NgModule({\r\n    declarations: [\r\n        ConnectOrganizationComponent\r\n    ],\r\n    imports     : [\r\n        RouterModule.forChild(routes),\r\n\r\n        TranslateModule,\r\n\r\n        FuseSharedModule,\r\n\r\n        MatFormFieldModule,\r\n        MatInputModule,\r\n        MatButtonModule,\r\n        MatIconModule,\r\n        MatSnackBarModule\r\n    ],\r\n    exports     : [\r\n        ConnectOrganizationComponent\r\n    ]\r\n})\r\n\r\nexport class ConnectOrganizationModule\r\n{\r\n}","import { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { NetworkService } from 'app/services/network.service';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\n\r\nexport class ConnectOrganizationService {\r\n\r\n    constructor(private networkService: NetworkService, private httpClient: HttpClient) { }\r\n\r\n    authenticateOrganization(body) {\r\n        return this.networkService.post('organization/acclaim', body);\r\n    }\r\n\r\n    postOrganization(body) {\r\n        return this.networkService.post('organization/connect', body);\r\n    }\r\n}","export const locale = {\r\n    lang: 'es',\r\n    data: {\r\n        \"CONFIRMATION\": {\r\n            \"CONNECT\": \"Conectar Organización\",\r\n            \"INFO\": \"Datos de la Organización\",\r\n            \"ID\": \"ID de Organización\",\r\n            \"TOKEN\": \"Token de Autorización\",\r\n            \"DO_CONNECT\": \"Conectar Organización\",\r\n            \"GO_BACK\": \"Volver\"\r\n        }\r\n    }\r\n}"],"sourceRoot":"webpack:///"}