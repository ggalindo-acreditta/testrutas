{"version":3,"sources":["./src/app/main/auth/login/login.component.html","./src/app/main/auth/login/i18n/es.ts","./src/app/main/auth/login/login.component.scss","./src/app/main/auth/login/login.component.ts","./src/app/main/auth/login/login.module.ts"],"names":[],"mappings":"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","file":"app-main-auth-login-login-module.js","sourcesContent":["export default \"<div fxLayout=\\\"row\\\" fxLayoutAlign=\\\"start\\\" class=\\\"page-layout carded\\\">\\r\\n    \\r\\n    <form [formGroup]=\\\"form\\\" fxFlex=\\\"100\\\" fxLayout=\\\"column\\\" fxLayoutAlign=\\\"center center\\\">\\r\\n        <div fxLayout=\\\"column\\\" fxLayoutAlign=\\\"start center\\\" class=\\\"p-20 mb-20 mat-card\\\" style=\\\"border-radius: 8px; width: 38%; min-width: 575px;\\\">\\r\\n            <div class=\\\"mb-20 mt-8\\\">\\r\\n                <span style=\\\"text-align: start; font-size: 1.8em;\\\">\\r\\n                    {{\\\"LOGIN.SIGNIN\\\" | translate}}\\r\\n                </span>\\r\\n                <br>\\r\\n                <div style=\\\"height: 5px\\\"></div>\\r\\n                <span style=\\\"text-align: center; font-size: 1.15em;\\\">\\r\\n                    {{\\\"LOGIN.INFO\\\" | translate}}\\r\\n            </span>\\r\\n            </div>\\r\\n            <mat-form-field style=\\\"width: 50%\\\">\\r\\n                <input\\r\\n                    matInput\\r\\n                    placeholder=\\\"{{'LOGIN.EMAIL' | translate}}\\\"\\r\\n                    formControlName=\\\"email\\\"\\r\\n                    required\\r\\n                >\\r\\n            </mat-form-field>\\r\\n\\r\\n            <mat-form-field style=\\\"width: 50%\\\">\\r\\n                <input\\r\\n                    matInput\\r\\n                    placeholder=\\\"{{'LOGIN.PASSWORD' | translate}}\\\"\\r\\n                    autocomplete=\\\"off\\\"\\r\\n                    formControlName=\\\"password\\\"\\r\\n                    type=\\\"password\\\"\\r\\n                    required\\r\\n                >\\r\\n            </mat-form-field>\\r\\n            <div style=\\\"margin-left: auto\\\" class=\\\"mt-16 mb-12 mr-40\\\">\\r\\n                <button mat-raised-button color=\\\"accent\\\" [disabled]=\\\"form.invalid\\\" (click)=\\\"login()\\\">{{\\\"LOGIN.SIGNIN\\\" | translate}}</button>\\r\\n            </div>\\r\\n        </div>\\r\\n        <span class=\\\"mb-80\\\">{{ 'LOGIN.NO_ACCOUNT' | translate }} <a style=\\\"color: #fb0014\\\" href=\\\"/#/auth/register\\\">{{ 'LOGIN.REGISTER' | translate }}</a></span>\\r\\n    </form>\\r\\n</div>\"","export const locale = {\r\n    lang: 'es',\r\n    data: {\r\n        \"LOGIN\": {\r\n            \"SIGNIN\": \"Ingresar\",\r\n            \"INFO\": \"Por favor complete los siguientes datos para ingresar al sistema\",\r\n            \"EMAIL\": \"Correo\",\r\n            \"PASSWORD\": \"Contraseña\",\r\n            \"LOADING\": \"Cargando...\",\r\n            \"NO_ACCOUNT\": \"¿No posee una cuenta?\",\r\n            \"REGISTER\": \"Registrarse\"\r\n        }\r\n    }\r\n}","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21haW4vYXV0aC9sb2dpbi9sb2dpbi5jb21wb25lbnQuc2NzcyJ9 */\"","import { Component, OnInit } from '@angular/core';\r\n\r\nimport { FuseTranslationLoaderService } from '@fuse/services/translation-loader.service';\r\nimport { FuseConfigService } from '@fuse/services/config.service';\r\nimport { FormGroup, FormBuilder, FormControl, Validators, AbstractControl } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\n\r\nimport { locale as spanish } from './i18n/es';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { MatSnackBar, MatSnackBarHorizontalPosition, MatSnackBarVerticalPosition } from '@angular/material/snack-bar';\r\nimport { AuthService } from '../auth.service';\r\nimport { FuseNavigationService } from '@fuse/components/navigation/navigation.service';\r\nimport { BadgesService } from 'app/services/badges.service';\r\n\r\n@Component({\r\n    selector   : 'login',\r\n    templateUrl: './login.component.html',\r\n    styleUrls  : ['./login.component.scss']\r\n})\r\nexport class LoginComponent implements OnInit {\r\n\r\n    form: FormGroup;\r\n\r\n    public horizontalPosition: MatSnackBarHorizontalPosition = 'center';\r\n    public verticalPosition: MatSnackBarVerticalPosition = 'top';\r\n\r\n    constructor(\r\n        private _fuseTranslationLoaderService: FuseTranslationLoaderService,\r\n        private _fuseConfigService: FuseConfigService,\r\n        private _fuseNavigationService: FuseNavigationService,\r\n        private translateService: TranslateService,\r\n        private authService: AuthService,\r\n        private badgesService: BadgesService,\r\n        private formBuilder: FormBuilder,\r\n        private snackbar: MatSnackBar,\r\n        private router: Router\r\n    ) {\r\n        this._fuseTranslationLoaderService.loadTranslations(spanish);\r\n    }\r\n\r\n    ngOnInit() {\r\n        // sessionStorage.removeItem('authToken');     //Dev\r\n        \r\n        this.form = this.formBuilder.group({\r\n            email: ['', [Validators.required, Validators.pattern(/\\S+@\\S+\\.\\S+/)]],\r\n            password: ['', [Validators.required, Validators.minLength(8)]]\r\n        });\r\n    }\r\n\r\n    login() {\r\n        this.snackbar.open(this.translateService.instant('LOGIN.LOADING'), 'INFO', {\r\n            horizontalPosition: this.horizontalPosition,\r\n            verticalPosition: this.verticalPosition,\r\n            duration: 99999,\r\n            panelClass: 'blue',\r\n        });\r\n\r\n        localStorage.removeItem('authToken');\r\n        sessionStorage.removeItem('authToken');\r\n        sessionStorage.removeItem('badges');\r\n        this.authService.login({ email: this.form.get('email').value, password: this.form.get('password').value }).subscribe(res => {\r\n            sessionStorage.setItem('authToken', res.token);\r\n            sessionStorage.setItem('authId', res.user);\r\n            this.authService.isAuthenticated = true;\r\n            this.authService.getProfile(res.user).subscribe(user => {\r\n                \r\n                this._fuseConfigService.config = {\r\n                    user: {\r\n                        id: user.id,\r\n                        firstname: user.firstname,\r\n                        lastname: user.lastname,\r\n                        email: user.email,\r\n                        type: user.type,\r\n                        status: user.status,\r\n                        organization: {\r\n                            id: user.organization_id,\r\n                            name: user.organization_name,\r\n                            description: user.organization_description,\r\n                            domain: user.organization_domain,\r\n                            image_url: user.organization_image_url\r\n                        }\r\n                    }\r\n                };\r\n                this._fuseNavigationService.setNavigationItem(user.type);\r\n            });\r\n\r\n            if(res.organization.id === 0) {\r\n                this.snackbar.dismiss();\r\n                this.router.navigate(['first_login']);\r\n            } else {            \r\n                this.badgesService.fetchBadges().subscribe(data_badges => {\r\n                    sessionStorage.setItem('badges', JSON.stringify(data_badges));\r\n                    this._fuseConfigService.config = {\r\n                        badges: data_badges\r\n                    }\r\n                    this._fuseConfigService.config = {\r\n                        layout: {\r\n                            navbar: {\r\n                                hidden: false\r\n                            }\r\n                        }\r\n                    }\r\n                    this.snackbar.dismiss();\r\n                    this.router.navigate(['home']);\r\n                })\r\n            }\r\n            \r\n        }, err => {\r\n            this.snackbar.open(err.error.message, 'ERROR', {\r\n                horizontalPosition: this.horizontalPosition,\r\n                verticalPosition: this.verticalPosition,\r\n                duration: 5000,\r\n                panelClass: 'red'\r\n            });\r\n        });\r\n    }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule } from '@angular/router';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\n\r\nimport { FuseSharedModule } from '@fuse/shared.module';\r\n\r\nimport { LoginComponent } from './login.component';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\r\n\r\nconst routes = [\r\n    {\r\n        path     : '',\r\n        component: LoginComponent\r\n    }\r\n];\r\n\r\n@NgModule({\r\n    declarations: [\r\n        LoginComponent\r\n    ],\r\n    imports     : [\r\n        RouterModule.forChild(routes),\r\n\r\n        TranslateModule,\r\n\r\n        FuseSharedModule,\r\n\r\n        MatFormFieldModule,\r\n        MatInputModule,\r\n        MatButtonModule,\r\n        MatSnackBarModule\r\n    ],\r\n    exports     : [\r\n        LoginComponent\r\n    ]\r\n})\r\n\r\nexport class LoginModule\r\n{\r\n}"],"sourceRoot":"webpack:///"}